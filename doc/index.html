<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<title>
  File: README
  
    &mdash; Documentation by YARD 0.8.5.2
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><div id='filecontents'>
<h2>Overview</h2>

<p>This module, barebone-fsm, implements a basic finite-state machine (FSM).
An FSM consists of a finite number of states, with one of them being the
current state of the FSM. Transitions are defined between states, which are
triggered on events. For details on FSM, see this wiki page: <a
href="http://en.wikipedia.org/wiki/Finite-state_machine">FSM</a>.</p>

<p>The motivation behind the module was to implement a very basic barebone
<span class='object_link'><a href="FSM.html" title="FSM (module)">FSM</a></span> in Ruby. Features are kept at minimum as well as the code. Only two
classes for the FSM are defined as the following:</p>
<ul><li>
<p><span class='object_link'><a href="FSM/FSM.html" title="FSM::FSM (class)">FSM::FSM</a></span> -&gt; the finite state machine class</p>
</li><li>
<p><span class='object_link'><a href="FSM/FSMState.html" title="FSM::FSMState (class)">FSM::FSMState</a></span> -&gt; the state class</p>
</li></ul>

<p>The <span class='object_link'><a href="FSM.html" title="FSM (module)">FSM</a></span> Module when included in a class also provides few convenience
methods. For further details see the README file.</p>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>Author</p></td>
<td>
<p>Md. Imrul Hassan (<a
href="mailto:mihassan@gmail.com">mihassan@gmail.com</a>)</p>
</td></tr><tr><td class="rdoc-term"><p>Copyright</p></td>
<td>
<p>Copyright (c) 2013, Md. Imrul Hassan</p>
</td></tr><tr><td class="rdoc-term"><p>License</p></td>
<td>
<p>Barebone-fsm is released under the MIT license</p>
</td></tr></table>

<h2>Features</h2>

<p>Apart from having support for states and events, this module offers the
following features:</p>
<ol><li>
<p>Default state</p>
</li><li>
<p>Default event for each state</p>
</li><li>
<p>Entry and exit events for each state</p>
</li><li>
<p>DSL like coding style</p>
</li><li>
<p>Access to state variables (including @state and @event) inside event blocks</p>
</li><li>
<p>The module when included in a Class, provides methods to setup the state
machine and trigger events</p>
</li><li>
<p>Dynamic methods generated for the Class to check states, events and trigger
events.</p>
</li></ol>

<h2>Usage</h2>

<p>The FSM can be setup and triggered Succinctly using Domain Specific
Language(DSL) like coding style. There are two methods to build and run
which are defined for both FSM and FSMState classes. These methods, #build
and #run, are alias of each other and can be used interchangebly. A basic
fintite-state machine for a microwave is simulated in the following
example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_fsm'>fsm</span> <span class='op'>=</span> <span class='const'>FSM</span><span class='op'>::</span><span class='const'>FSM</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='symbol'>:stopped</span><span class='rparen'>)</span>
<span class='id identifier rubyid_fsm'>fsm</span><span class='period'>.</span><span class='id identifier rubyid_build'>build</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_state'>state</span> <span class='symbol'>:stopped</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_event'>event</span> <span class='symbol'>:open</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[Stopped]: Door Opened</span><span class='tstring_end'>&quot;</span></span>
      <span class='symbol'>:open</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_event'>event</span> <span class='symbol'>:start</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[Stopped]: Started</span><span class='tstring_end'>&quot;</span></span>
      <span class='symbol'>:started</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_state'>state</span> <span class='symbol'>:open</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_event'>event</span> <span class='symbol'>:close</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[</span><span class='embexpr_beg'>#{</span><span class='ivar'>@state</span><span class='rbrace'>}</span><span class='tstring_content'>]: Door </span><span class='embexpr_beg'>#{</span><span class='ivar'>@event</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='symbol'>:stopped</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_state'>state</span> <span class='symbol'>:started</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_event'>event</span> <span class='symbol'>:open</span> <span class='kw'>do</span>
      <span class='ivar'>@open_time</span> <span class='op'>=</span> <span class='const'>Time</span><span class='op'>::</span><span class='id identifier rubyid_now'>now</span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[Started]: Door Opened</span><span class='tstring_end'>&quot;</span></span>
      <span class='symbol'>:open</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_event'>event</span> <span class='symbol'>:stop</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The door was opened at </span><span class='embexpr_beg'>#{</span><span class='ivar'>@open_time</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[Started]: Door Stopped after </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_elapsed_time'>elapsed_time</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='symbol'>:stopped</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
<span class='id identifier rubyid_fsm'>fsm</span><span class='period'>.</span><span class='id identifier rubyid_run'>run</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_event'>event</span> <span class='symbol'>:start</span>
  <span class='id identifier rubyid_event'>event</span> <span class='symbol'>:open</span>
  <span class='id identifier rubyid_event'>event</span> <span class='symbol'>:close</span>
  <span class='id identifier rubyid_event'>event</span> <span class='symbol'>:start</span>
  <span class='id identifier rubyid_event'>event</span> <span class='symbol'>:stop</span>
<span class='kw'>end</span></code></pre>

<h2>Status</h2>

<p>The module works as it is, I have added some testing and documentation; it
may be expanded. The api is not stable yet, it may go trhough lots of
changes before the first stable version is released. I am open to any
suggestion or request to support custom features.</p>

<h2>Changes</h2>
<ul><li>
<p>Version: 0.0.3</p>
<ul><li>
<p>Added Module level methods for easy access to states and events.</p>
</li><li>
<p>Added documentations for all the methods.</p>
</li><li>
<p>Added Module level dynamic methods to check states, events and to trigger
events.</p>
</li><li>
<p>Added some testing codes using RSpec.</p>
</li></ul>
</li><li>
<p>Version: 0.0.2</p>
<ul><li>
<p>State variables defined in other states can be accessed in the event block
as well.</p>
</li></ul>
</li><li>
<p>Version: 0.0.1.3</p>
<ul><li>
<p>Minor fixes on the usage examples.</p>
</li></ul>
</li><li>
<p>Version: 0.0.1.2</p>
<ul><li>
<p>@state instance variable for FSM is dropped in favour of the #state
instance method.</p>
</li><li>
<p>#state method and index operator [] now accept nil arguement for state
name, which returns the current state.</p>
</li><li>
<p>Two methods #build and #run are added to FSM and FSMState classes to
support DSL like features.</p>
</li><li>
<p>Explicit parameter passing for the event blocks is no longer available. 
Instead the block code for the events now have access to all instance
variables of FSMState class such as @state and @event.</p>
</li></ul>
</li></ul>
</div></div>

    <div id="footer">
  Generated on Sat May 18 04:55:23 2013 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.5.2 (ruby-1.9.3).
</div>

  </body>
</html>